{% extends "admin_layout.html" %}

{% block content %}
<h2>Преподаватели</h2>

<div class="admin-form">
  <form action="{{ url_for('admin_teachers_add') }}" method="post" enctype="multipart/form-data">
    <h3>Добавить преподавателя</h3>

    <input type="text" name="name" placeholder="Имя" required>
    <input type="text" name="role" placeholder="Роль / уровень" required>
    <textarea name="bio" rows="4" placeholder="Биография / опыт"></textarea>

    <label>Фото:</label>
    <input type="file" name="photo" accept="image/*">

    <button class="admin-btn" type="submit">Добавить</button>
  </form>
</div>

<table class="admin-table">
  <thead>
    <tr>
      <th>Фото</th>
      <th>Имя</th>
      <th>Роль</th>
      <th>Биография</th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    {% for t in teachers %}
    <tr>
      <td>
        {% if t.photo %}
          <img src="{{ url_for('static', filename='uploads/teachers/' ~ t.photo) }}">
        {% else %}
          —
        {% endif %}
      </td>
      <td>{{ t.name }}</td>
      <td>{{ t.role }}</td>
      <td>{{ t.bio }}</td>

    <td style="white-space: nowrap;">
        <a href="{{ url_for('admin_teachers_edit', tid=t.id) }}" class="btn-link" style="margin-right:6px;">
        Редактировать
        </a>
        <form action="{{ url_for('admin_teachers_delete', tid=t.id) }}"
            method="post"
            style="display:inline-block;"
            onsubmit="return confirm('Удалить преподавателя {{ t.name }}?');">
        <button class="admin-delete-btn">Удалить</button>
        </form> 
    </td>

    </tr>
    {% else %}
      <tr><td colspan="5">Пока нет преподавателей.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
