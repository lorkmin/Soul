{% extends "admin_layout.html" %}
{% block content %}

<h2>{{ 'Редактировать ученика' if student else 'Добавить ученика' }}</h2>

<div class="admin-form">
  <form method="post">

    <div class="form-field">
      <label>Имя ученика</label>
      <input type="text" name="name" placeholder="Имя ученика" value="{{ student['name'] if student else '' }}"
        required />
    </div>
    <div class="form-field">
      <label>Преподаватель</label>
      <select name="teacher_id">
        <option value="">— не указан —</option>
        {% for t in teachers %}
        <option value="{{ t.id }}" {% if student.teacher_id==t.id %}selected{% endif %}>
          {{ t.name }}
        </option>
        {% endfor %}
      </select>
    </div>

    <div class="form-field">
      <label>Курс / группа</label>
      <input type="text" name="course" placeholder="Например: Начальный-1"
        value="{{ student['course'] if student else '' }}" />
    </div>

    <div class="form-field">
      <label>Осталось занятий</label>
      <input type="number" name="lessons_left" min="0" placeholder="0"
        value="{{ student['lessons_left'] if student else 0 }}" />
    </div>

    <div class="form-field">
      <label>Статус</label>
      <select name="status">
        <option value="active" {% if student and student['status']=='active' %}selected{% endif %}>
          Активен
        </option>
        <option value="paused" {% if student and student['status']=='paused' %}selected{% endif %}>
          Пауза
        </option>
        <option value="finished" {% if student and student['status']=='finished' %}selected{% endif %}>
          Завершил обучение
        </option>
      </select>
    </div>

    <div class="form-field">
      <label>Комментарий</label>
      <textarea name="comment" rows="3"
        placeholder="Доп. инфо: формат, особые условия и т.п.">{{- student['comment'] if student else '' -}}</textarea>
    </div>

    <div class="admin-form-actions">
      <button type="submit" class="admin-btn">
        {{ 'Сохранить изменения' if student else 'Добавить ученика' }}
      </button>

      <a href="{{ url_for('teacher_students') }}" class="admin-secondary-link">
        Отменить
      </a>
    </div>

  </form>
</div>

{% endblock %}