{% extends "admin_layout.html" %}
{% block content %}

<h2>Расписание преподавателя</h2>
<p>Выберите преподавателя, чтобы увидеть его график</p>

<form method="get">
  <select name="tid" onchange="this.form.submit()">
    <option value="">— выберите преподавателя —</option>
    {% for t in teachers %}
      <option value="{{ t.id }}" {% if teacher and teacher.id == t.id %}selected{% endif %}>
        {{ t.name }}
      </option>
    {% endfor %}
  </select>
</form>

{% if teacher %}
<h3>График: {{ teacher.name }}</h3>
{% if lessons %}
<ul>
  {% for l in lessons %}
    <li>
      <strong>{{ l.start_at }}</strong> — {{ l.student_name }}
      {% if l.topic %} ({{ l.topic }}){% endif %}
      — статус: {{ l.status }}
    </li>
  {% endfor %}
</ul>
{% else %}
<p>Нет занятий.</p>
{% endif %}
{% endif %}

{% endblock %}
